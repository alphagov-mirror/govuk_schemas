# GOV.UK Schemas

Gem to work with the [GOV.UK Content Schemas](https://github.com/alphagov/govuk-content-schemas).

## Installation

In your Gemfile:

```ruby
gem "govuk_schemas", "~> VERSION"
```

## Usage

### Generating random content

Generate a valid content item for the [frontend schema for detailed guides](...).

```ruby
irb(main):001:0> GovukSchemas::RandomExample.for_schema("detailed_guide", schema_type: "frontend").payload
=> {"base_path"=>"/e42dd28e9ed96dc17626ac8b1b7b8511", "title"=>"dolor est...", "publishing_app"=>"elit"...}
```

### Using it to guarantee valid data

```ruby
irb(main):001:0> random = GovukSchemas::RandomExample.for_schema("detailed_guide", schema_type: "frontend")
irb(main):002:0> random.merge_and_validate(base_path: "/foo")
=> {"base_path"=>"/foo", "title"=>"dolor est...", "publishing_app"=>"elit"...}
```

Which will fail if the data you provide would generate an invalid content item.

```ruby
irb(main):001:0> random = GovukSchemas::RandomExample.for_schema("detailed_guide", schema_type: "frontend")
irb(main):002:0> random.merge_and_validate(base_path: nil)
=> GovukSchemas::InvalidContentGenerated: An invalid content item was generated by `RandomExample`.
```

### Loading a schema

```ruby
irb(main):001:0> GovukSchemas::Schema.find("detailed_guide", schema_type: "frontend")
=> {"$schema"=>"http://json-schema.org/draft-04/schema#", "type"=>"object", "additionalProperties"=>...
```

## Running the test suite

Make sure you have `govuk-content-schemas` cloned in a sibling directory:

```
bundle exec rake
```

## Releasing the gem

This gem uses [gem_publisher](https://github.com/alphagov/gem_publisher). Updating the [version](lib/govuk_schemas/version.rb) will automatically release a new version to Rubygems.

## License

The gem is available as open source under the terms of the [MIT License](LICENSE.md).
